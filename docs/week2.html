<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Week 2 – Introduction to R and RStudio</title>

<script src="site_libs/header-attrs-2.20/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>






<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"><img style="width: 120px; float: left; margin-top: 0px; margin-right: 20px;" src="images/CRUK_CI_logo.png"/>R for Biologists&nbsp;&nbsp;&nbsp;</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Contents
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="week1.html">Week 1 - An introduction to RStudio, R objects, data types, functions and vectors</a>
    </li>
    <li>
      <a href="week2.html">Week 2 - An introduction to other data structures</a>
    </li>
    <li>
      <a href="week3.html">Week 3 - Working with data in R</a>
    </li>
    <li>
      <a href="week4.html">Week 4 - Data visualization with ggplot2</a>
    </li>
    <li>
      <a href="week5.html">Week 5 - Data manipulation using dplyr</a>
    </li>
    <li>
      <a href="week6.html">Week 6 - Grouping and combining data</a>
    </li>
    <li>
      <a href="week7.html">Week 7 - Restructuring data for analysis</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/bioinformatics-core-shared-training/Bitesize-R">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Week 2 – Introduction to R and RStudio</h1>

</div>


<blockquote>
<h4 id="aims">Aims</h4>
<ul>
<li>To demonstrate the ways in which R can store data</li>
<li>To show how R functions can operate on such data</li>
</ul>
<h4 id="learning-objectives">Learning objectives</h4>
<ul>
<li>Learn about the functions of the various panes in Rstudio</li>
<li>Introduce the concept of vectors and the types of data that they can
hold</li>
<li>Present the different ways that a user can access documentation in R
and when to use them</li>
<li>Demonstrate the basic format for using an R function</li>
<li>Teach some simple but useful functions in R</li>
</ul>
</blockquote>
<div id="our-first-look-at-the-r-language" class="section level1">
<h1>Our first look at the R language</h1>
<p>Our overall goal for this course is to give you the ability to import
your data into R, select a subset of the data most of interest for a
given analysis, carry out an analysis to summarize these data and create
visualizations of the data. First though, let us consider <strong>“What
is Data?”</strong></p>
<p>Data comes in many forms: Numbers (Integers and decimal values) or
alphabetical (characters or lines of text). Clearly a computer (or R)
needs a way of representing this wide range of data with it’s diverse
properties.</p>
<p><em>The pigeon-hole analogy:- R stores data in contiguous sections of
computer memory a bit like the pigeon-holes used in many internal mail
systems. These holes are indexed e.g by 1st letter of surname or a range
of letters e.g. A-C. Internal mail systems can carry different types of
traffic small notes, large envelopes or parcels with different
dimensions so there may be rows associated with small letters, big
letters and parcels. For a system like this it makes sense that a row
contains the same type of mail with similar dimensions to avoid wasting
space.</em></p>
<div id="storing-our-first-r-data-value" class="section level2">
<h2>Storing our first R data value</h2>
<p>R has an equivalent to this called a Vector – everything is
represented as a vector. For example say we had a single numerical value
8 and this was the number of samples in an experiment – an R vector can
be created (or assigned) thusly:</p>
<pre class="r"><code>samples &lt;- 8</code></pre>
<p>The <code>&lt;-</code> is the assignment action and
<code>samples</code> is the name of our vector.</p>
<p>If we just type <code>samples</code> followed by the return key R
will print the contents of the vector called samples (Try it). Notice
that Rstudio tries to help us by autocompleting the variable name to
avoid mis-typing.</p>
<p>Be kind to yourself and use meaningful names for your vectors like
<code>samples</code> rather than <code>s</code>. When you come back to
your code after 6 months or give it to colleagues it will be more
obvious what your program is doing and how it works. Also, note that the
variable Samples is different to the variable samples (<strong>Case
matters</strong>).</p>
<pre class="r"><code>samples &lt;- 8
Samples &lt;- 24
samples</code></pre>
<pre><code>## [1] 8</code></pre>
<pre class="r"><code>Samples</code></pre>
<pre><code>## [1] 24</code></pre>
<p>What if we found out that there were actually 12 samples? We can
correct this by re-assigning the value of samples:</p>
<p>Now try outputting the value – is it 12 or 8?</p>
<pre class="r"><code>samples &lt;- 12</code></pre>
<p>Of course our data is often a decimal value e.g.</p>
<pre class="r"><code>ph &lt;- 5.5</code></pre>
<p>Or we may have a name e.g. a <em>string</em> of characters.</p>
<pre class="r"><code>drug &lt;- &quot;Gefitinib&quot;</code></pre>
<p>A less obvious type of data (but incredibly useful later on in this
course) are logical values i.e. <code>TRUE</code> and
<code>FALSE</code>.</p>
<pre class="r"><code>yes &lt;- TRUE
no &lt;- FALSE
yes</code></pre>
<pre><code>## [1] TRUE</code></pre>
<pre class="r"><code>no</code></pre>
<pre><code>## [1] FALSE</code></pre>
</div>
<div id="storing-more-than-one-value" class="section level2">
<h2>Storing more than one value</h2>
<p>We are much more likely to want to store a series of data
e.g. observation values. Vectors can take any number of values but the
assignment statement changes slightly.</p>
<pre class="r"><code>obs &lt;- c(2, 5, 8, 5, 8, 2)
obs</code></pre>
<pre><code>## [1] 2 5 8 5 8 2</code></pre>
<pre class="r"><code>vulcan &lt;- c(TRUE, FALSE, !TRUE, !FALSE)
vulcan</code></pre>
<pre><code>## [1]  TRUE FALSE FALSE  TRUE</code></pre>
<p>What happens when you ask R to print obs?</p>
<p><strong>Note</strong> that with the logical vector we can use the
<strong><code>!</code></strong> operator to negate (or NOT) a logical
i.e. <code>!TRUE</code> is equal to <code>FALSE</code>.</p>
<p>Calculations can also be included in assignments e.g. we might have a
column supplied in one type of units and we need it in another.</p>
<pre class="r"><code>new_obs &lt;- obs * 2.2
new_obs</code></pre>
<pre><code>## [1]  4.4 11.0 17.6 11.0 17.6  4.4</code></pre>
<pre class="r"><code>smaller &lt;- samples / 2
smaller</code></pre>
<pre><code>## [1] 6</code></pre>
<p><strong>Notice that each and every element of the vector has been
multiplied by 2.2</strong>. This is what was happening when we used
<code>1:36 * 2</code> earlier.</p>
<p>Here are some more arithmetic operators you’re likely to come
across.</p>
<table>
<thead>
<tr class="header">
<th>Symbol</th>
<th>Effect</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>+</td>
<td>Addition</td>
</tr>
<tr class="even">
<td>–</td>
<td>Subtraction</td>
</tr>
<tr class="odd">
<td>*</td>
<td>Multiplication</td>
</tr>
<tr class="even">
<td>/</td>
<td>Division</td>
</tr>
<tr class="odd">
<td>^</td>
<td>Exponent</td>
</tr>
<tr class="even">
<td>%%</td>
<td>Modulus (Remainder)</td>
</tr>
<tr class="odd">
<td>%/%</td>
<td>Integer Division</td>
</tr>
</tbody>
</table>
<p><strong>Note</strong> that when applying arithmetical functions to
vectors they must be appropriate. For example, if you try and add 3 to
the character string “a” then R will quite rightly return an error
message.</p>
<pre><code>&gt; &quot;a&quot; + 3
Error in &quot;a&quot; + 3 : non-numeric argument to binary operator</code></pre>
<p>Similarly, we can have long vectors of text strings:</p>
<pre class="r"><code>animals &lt;- c(&#39;cat&#39;, &#39;dog&#39;, &#39;mouse&#39;)
drugs &lt;- c(&#39;Gefitinib&#39;, &#39;FCR&#39;, &quot;Vincristine&quot;)
bases &lt;- c(&quot;c&quot;, &quot;g&quot;, &quot;t&quot;, &quot;a&quot;, &quot;n&quot;)</code></pre>
<p>What happens if you print these?</p>
</div>
<div id="our-first-r-function-help" class="section level2">
<h2>Our first R function – help</h2>
<p>Functions are like mathematical functions they take argument(s) and
return a result and the arguments are enclosed in brackets i.e. <span
class="math inline">\(Y = F(X)\)</span></p>
<p>They extend the capabilities of R. A function that you will find most
‘helpful’ is the help() function. It provides help on the topic that is
supplied as the argument.</p>
<p>Try</p>
<pre class="r"><code>help(help)</code></pre>
<p>The result appears in the bottom right-hand pane.</p>
<p>Notice how Rstudio tries to help you by suggesting what the arguments
could be (in floating yellow text box). <em>Need more help?</em> You can
also use ?<command> i.e. <code>?help</code>.</p>
<p>If you know roughly what you need but not the actual function name
use <code>??</code> e.g. <code>??average</code>.</p>
<p>What if you know the function name but can’t recall what the
arguments are? Try <code>args()</code> function
e.g. <code>args(plot.default)</code>.</p>
<div id="more-useful-functions" class="section level3">
<h3>More useful functions</h3>
<p><strong><code>length()</code></strong> to find out how many elements
are in a vector</p>
<pre class="r"><code>length(animals)</code></pre>
<pre><code>## [1] 3</code></pre>
<p><strong><code>class()</code></strong> will tell you the class
(suprise) of a vector e.g. character or numeric</p>
<pre class="r"><code>class(animals)</code></pre>
<pre><code>## [1] &quot;character&quot;</code></pre>
<pre class="r"><code>class(obs)</code></pre>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<p><strong><code>str()</code></strong> reports the structure of an
object. This terse report includes such useful information as class,
index range of elements e.g. 1..n and the values contained therein. The
same output can be seen for each object in the Environment pane in the
top right-hand pane.</p>
<pre class="r"><code>str(obs)</code></pre>
<pre><code>##  num [1:6] 2 5 8 5 8 2</code></pre>
<p><strong><code>typeof()</code></strong> - reports how object is stored
e.g. character, integer, double or logical. If we explicitly want a
vector to be integer-only we can use another function
<strong><code>as.integer()</code></strong> or a suffix of
<strong><code>L</code></strong> when we assign it (see below).</p>
<pre class="r"><code>?typeof
samples</code></pre>
<pre><code>## [1] 12</code></pre>
<pre class="r"><code>typeof(samples)</code></pre>
<pre><code>## [1] &quot;double&quot;</code></pre>
<pre class="r"><code>hint &lt;- 5L
hint2 &lt;- as.integer(25)
hint</code></pre>
<pre><code>## [1] 5</code></pre>
<pre class="r"><code>typeof(hint)</code></pre>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<pre class="r"><code>hint2</code></pre>
<pre><code>## [1] 25</code></pre>
<pre class="r"><code>typeof(hint2)</code></pre>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<pre class="r"><code>drug</code></pre>
<pre><code>## [1] &quot;Gefitinib&quot;</code></pre>
<pre class="r"><code>typeof(drug)</code></pre>
<pre><code>## [1] &quot;character&quot;</code></pre>
<p>So what does R mean by these types and why would we use one over
another? What does R have to tell us on this topic?</p>
<pre class="r"><code>?integer</code></pre>
<pre class="r"><code>?double</code></pre>
<pre class="r"><code>?character</code></pre>
<p><strong>Integer</strong> - whole discrete numbers e.g. numbers of
mice, cell counts.</p>
<p><strong>Double</strong> - continuous decimal values e.g. specific
activity or a voltage reading.</p>
<p><strong>Character</strong> - A string of one to N alphanumeric
characters e.g. a drug name.</p>
<p><strong>Factor</strong> - A new one. Categorical values that may or
may not have any heirachical order e.g. drug1, drug2, drug3. We would
use these to seperate data e.g. when plotting. More about factors later
in the course.</p>
<p>Computational aspects of these types relate to space required to
store the value (number of bytes) and speed at accessing the value.
Order of lowest to highest is typically: integer, double and character.
However, unless you are dealing with huge quantities of data or lots of
processing, this is unlikely to affect your programs.</p>
<p><strong>Important</strong> - you can only store one type of data in
any one vector i.e. all logical or all character etc. If you mix them, R
will store them in the lowest common denominator of type in order to
preserve as much information as possible about the value.</p>
<p><strong><code>summary()</code></strong> - one of my
<strong>favourite</strong> functions. R gives an object summary of the
vector. this means that what is returned depends on the vector. I often
use it on data after I have read it in from a file to do a ‘sanity
check’ and find maximum and minimum values etc to spot unexpected (and
possibly erroneous) values.</p>
<pre class="r"><code>summary(obs)</code></pre>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##    2.00    2.75    5.00    5.00    7.25    8.00</code></pre>
<p>So-called ‘Base’ R does possess plotting functions. However, later
lessons will teach you how to plot using a much more powerful and
easy-to-use <em>tidyverse</em> package called <em>ggplot2</em>.</p>
<p>Just to demonstrate a function with multiple parameters, I will use
base R plot here. Once you have read in your data you may wish to do a
quick &amp; dirty plot it e.g. to spot any trends or outliers. This can
be done quickly in R (but much finer control in ggplot2).</p>
<pre class="r"><code> X &lt;- c(1,2,3,4,5)
 Y &lt;- c(9, 17, 23, 38, 52)
 plot.default(X, Y, pch = 4, col = &quot;red&quot;)</code></pre>
<p><img src="week2_files/figure-html/scatter_plot-1.png" width="672" /></p>
<p><strong>A point to note here</strong> - In the help you will notice
that parameters are usually presented in a specific order in the
brackets. This will work fine, but you may wish to take default values
or enter parameters out of order. You can do this by using a parameter
name e.g. the plot character is called ‘pch’ and we can put
<code>pch = N</code> anywhere between the brackets. However, just
because you can is not a good reason. Doing things out of order for no
reason can make your code less readable.</p>
<hr />
</div>
</div>
</div>
<div id="summary" class="section level1">
<h1>Summary</h1>
<p>In this session we have covered the following concepts:</p>
<ul>
<li>The Rstudio environment and the functions associated with each
pane</li>
<li>Using the RStudio console as a calculator and place to test out R
code</li>
<li>Storing a single item of data in an R vector</li>
<li>Storing multiple items of data in an R vector</li>
<li>Arithmetic operators and applying them to R vectors</li>
<li>Calling functions in R</li>
<li>Many different ways of getting help within R</li>
<li>Learning about the different types of vector in R (integer, double,
character)</li>
<li>Further details on how we can supply parameters to an R
function</li>
</ul>
<p>We also cover how to work within an R markdown document and run code
therein in this week’s assignment.</p>
<hr />
</div>
<div id="assignment" class="section level1">
<h1>Assignment</h1>
<p>Assignment: <a
href="assignments/assignment1.Rmd">assignment1.Rmd</a></p>
<p>Solutions: <a
href="assignments/assignment1_walkthrough.Rmd">assignment1_walkthrough.Rmd</a>
and <a
href="assignments/assignment1_solutions.html">assignment1_solutions.html</a></p>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
