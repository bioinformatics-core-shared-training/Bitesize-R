<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>R Markdown</title>

<script src="site_libs/header-attrs-2.29/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="site_libs/datatables-binding-0.33/datatables.js"></script>
<link href="site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
<link href="site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet" />
<script src="site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<script src="site_libs/jszip-1.13.6/jszip.min.js"></script>
<link href="site_libs/dt-ext-buttons-1.13.6/css/buttons.dataTables.min.css" rel="stylesheet" />
<script src="site_libs/dt-ext-buttons-1.13.6/js/dataTables.buttons.min.js"></script>
<script src="site_libs/dt-ext-buttons-1.13.6/js/buttons.html5.min.js"></script>
<script src="site_libs/dt-ext-buttons-1.13.6/js/buttons.colVis.min.js"></script>
<script src="site_libs/dt-ext-buttons-1.13.6/js/buttons.print.min.js"></script>
<link href="site_libs/font-awesome-6.5.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>






<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"><img style="width: 120px; float: left; margin-top: 0px; margin-right: 20px;" src="images/CRUK_CI_logo.png"/>R for Biologists&nbsp;&nbsp;&nbsp;</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Contents
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="week1.html">Week 1 - Introduction to R</a>
    </li>
    <li>
      <a href="week2.html">Week 2 - Introduction to R data structures</a>
    </li>
    <li>
      <a href="week3.html">Week 3 - Working with data in R</a>
    </li>
    <li>
      <a href="week4.html">Week 4 - Data visualization with ggplot2</a>
    </li>
    <li>
      <a href="week5.html">Week 5 - Data manipulation using dplyr</a>
    </li>
    <li>
      <a href="week6.html">Week 6 - Grouping and combining data</a>
    </li>
    <li>
      <a href="week8.html">Week 8 - Restructuring data for analysis</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/bioinformatics-core-shared-training/Bitesize-R">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">R Markdown</h1>

</div>


<blockquote>
<h4 id="learning-objectives">Learning objectives</h4>
<ul>
<li>Learn how to generate an html/pdf report using Rmarkdown and
Rstudio</li>
</ul>
</blockquote>
<div id="what-is-r-markdown" class="section level2">
<h2>What is R Markdown?</h2>
<p>R Markdown provides a means of combining executable R code, code
output and textual content in a single document. This documents can then
be used to create report in a variety of different formats, such as PDF,
HTML or even Word. R Markdown can be used to create static reports or
slides.</p>
<p>The session will provide a brief introduction to R Markdown,
including how to create a new R Markdown document, how to add text and
images, how to insert R code chunks, and how to render the document to
create a report.</p>
<p>More detailed materials can be found <a
href="https://rmarkdown.rstudio.com/index.html">here</a>.</p>
</div>
<div id="packages-for-this-session" class="section level2">
<h2>Packages for this session</h2>
<p>We will be using the following packages in this session. If you don’t
have them installed, you can do so using the
<code>install.packages()</code> function.</p>
<pre class="r"><code>library(tidyverse)
library(knitr)
library(kableExtra)
library(DT)
library(patchwork)</code></pre>
<p><code>knitr</code> is the package that is used to convert R Markdown
documents to various output formats. It is also used to control how the
output of R code is rendered in the document, and its <code>kable</code>
function is used to create tables in R Markdown documents. Note that you
don’t need to load the <code>knitr</code> package explicitly, as it is
loaded automatically when you create an R Markdown, but if you want to
use the <code>kable</code> function you may wish in order not to have to
type <code>knitr::kable()</code> every time.</p>
<p>The <code>kableExtra</code> package extends the functionality of
<code>knitr</code>, providing additional functions for formatting
tables. The <code>DT</code> package provides a way to create interactive
tables in R Markdown documents. The <code>patchwork</code> package
provides a way to combine multiple ggplots into a single figure.</p>
</div>
<div id="creating-an-r-markdown-document" class="section level2">
<h2>Creating an R Markdown document</h2>
<p>We can start a new R Markdown document in RStudio from the menu
bar:</p>
<p><code>File</code> –&gt; <code>New File</code> –&gt;
<code>R Markdown...</code></p>
<p><img src="images/Rmarkdown_new_doc.png" /></p>
<p>This will bring up the following diaglogue box:</p>
<p><img src="images/Rmarkdown_creation_dialogue.png" /></p>
<p>Change the title to something meaningful, add your name as the author
if you wish, select the type of document you want the markdown to
generate (this can be changed later) and then click <code>OK</code> to
create a starter script.</p>
<p>Save the starter script as <code>MyFirstRmarkdown.Rmd</code>.</p>
</div>
<div id="the-basic-components-of-an-r-markdown" class="section level2">
<h2>The basic components of an R Markdown</h2>
<p>An R Markdown file is made up of 3 components:</p>
<ul>
<li>Header - metadata and instructions related to rendering the
document</li>
<li>Markdown sections - Text, images, links, tables, lists to be
included in the report</li>
<li>R code chunks - Code chunks to be executed and the output included
in the report</li>
</ul>
<p><img src="images/Rmarkdown_starter_script_Annotated.png" /></p>
<p>You may have noticed that opening an R Markdown (<code>.Rmd</code>)
document caused a few new icons to appear on the toolbar above the
script window. For now just click:</p>
<p><img src="images/Rmarkdown_knit_button.png" width="90"/></p>
<p>This will convert (or <em>render</em>) the document to html
format.</p>
<p>In this session we will generate an HTML file, however, it is
possible to generate a range of different document types, and these are
extensible to link multiple documents into “books” or websites. We’ll
keep it simple for this introduction. Let’s look at each section in a
little more detail.</p>
</div>
<div id="header" class="section level2">
<h2>Header</h2>
<p>The R markdown document starts with a header in <a
href="https://yaml.org/">YAML format</a>.</p>
<p>The header begins and ends with a line with three hyphens
(<code>---</code>). The only required field is the <code>output</code>
field, which defines what type of document is to be created. Other
fields either define metadata, e.g. <code>author</code> or
<code>title</code>, or they contain information related to the rendering
of the output document, e.g. whether to include a table of contents or
not (we’ll look at this later).</p>
<p>In the example below the <code>title</code>, <code>author</code>,
<code>output</code> and <code>date</code> have been specified</p>
<pre><code>---
title: &quot;My First Markdown&quot;
author: &quot;Ashley Sawle&quot;
output: html_document
date: &quot;2025-04-23&quot;
---</code></pre>
</div>
<div id="markdown-header" class="section level2">
<h2>Markdown sections</h2>
<p>Markdown is a markup language that allows you to add formatting to
text, such as bold or italics. Unlike in a word processor such as MS
Word, the effect of formatting is not visible in a markdown (.md)
document, only once the document is rendered to create the output.
Markdown uses specific syntax to add formats to the text. The benefit of
this is Markdown is lightweight and platform independent.</p>
<p>R Markdown combines normal Markdown for text and images with separate
chunks thank can contain executable R code, the outputs of which can be
included in the document.</p>
<p>The full documentation of the Markdown syntax can be found <a
href="https://www.markdownguide.org/">here</a>. Here we will concentrate
on the most commonly used elements.</p>
<div id="inline-text-formatting" class="section level3">
<h3>Inline text formatting</h3>
<p>Seeing as we have already mentioned <strong>bold</strong> and
<em>italics</em>, let’s see how they work. To apply inline formatting
for text, we simply surround the text we want to format with a
particular set of symbols. For example to render some text in
<em>italics</em> we surround the text with either asterisks or
underscores:</p>
<p><code>This is *italics*</code> or <code>This is _italics_</code> →
This is <em>italics</em></p>
<p>Other possible inline formatting syntax includes:</p>
<ul>
<li><p>Double asterisks/underscores for <strong>bold</strong>:</p>
<p><code>This **is bold**</code> or <code>This __is bold__</code> → This
<strong>is bold</strong></p></li>
<li><p>Tilde (<code>~</code>) for subscript:</p>
<p><code>This is ~subscript~</code> → This is
<sub>subscript</sub></p></li>
<li><p>Caret (<code>^</code>) for superscript:</p>
<p><code>This is ^superscript^</code> → This is
<sup>superscript</sup></p></li>
<li><p>Double tilde (<code>~</code>) for strikethrough:</p>
<p><code>~~This is strikethrough~~</code> → <del>This is
strikethrough</del></p></li>
<li><p>Backticks (<code>`</code>) for “code” font:</p>
<p><code>This is `code`</code> → This is <code>code</code></p></li>
</ul>
<p>Note that any amount of text can come between the two sets of
syntax.</p>
</div>
<div id="headings" class="section level3">
<h3>Headings</h3>
<p>Section headings are created using the <code>#</code> symbol
(technically called an octothorp!) at the beginning of the line. The top
level is the document title and uses one <code>#</code>:</p>
<p><code># Title</code></p>
<p>However, we have specified this in the yaml header so would not use
it in the body of the document. Using 2 creates a section header:</p>
<p><code>## Section</code> → <span
style="font-weight:500; font-size:20px">Section</span></p>
<p>Increasing the number of <code>#</code> symbols creates deeper and
deeper levels of sub-sections.</p>
<pre><code># Title
## Section
### Sub-section
#### Sub-sub section
##### Sub-sub-sub section
###### Sub-sub-sub-sub section</code></pre>
<div id="adding-a-table-of-contents" class="section level4">
<h4>Adding a table of contents</h4>
<p>The section headers can be automatically added to a table of
contents. As this is “instructions related to rendering the document”,
we need to add this information to the head yaml:</p>
<pre><code>output:
  html_document:
    toc: true</code></pre>
<p>By default all headings up to level 3 headings are displayed in the
table of contents. You can adjust this by specifying
<code>toc_depth</code>. Also, the table of contents will default to a
“static” list under after title matter of the document. With html format
we could instead have a “floating” (and collapsible) table of contents
that stays on view on the left of the document body as the document is
scrolled. To implement these we add two additional lines to the
yaml:</p>
<pre><code>output:
  html_document:
    toc: true
    toc_depth: 4
    toc_float: true</code></pre>
</div>
<div id="tab-sets" class="section level4">
<h4>Tab sets</h4>
<p>A neat thing to do with headers and sub-headers is to create tab
sets. If we add the syntax {.tabset} after a header, all subsequent
sub-headers on the next level down will be rendered as tabs, rather than
just consecutive text. For example:</p>
<pre><code>#### Some different formattings {.tabset}

The following tabs show different inline formatting syntax.

##### Bold

Bold is achieved with double asterisks e.g. `**bold**` is rendered as **bold**.

##### Italics

Italics is achieved with a single asterisk e.g. `*italics*` is rendered as *italics*.

##### Strikethrough {.unlisted .unnumbered}

Strikethrough is achieved with tilde e.g. `~strikethrough~` is rendered as 
~Strikethrough~.

#### Next section

The tab set ends when we return to a higher header level.</code></pre>
<p>is rendered as:</p>
</div>
<div class="renderedblock">
<div id="some-different-formattings"
class="section level4 tabset unlisted unnumbered">
<h4 class="tabset unlisted unnumbered">Some different formattings</h4>
<p>The following tabs show different inline formatting syntax.</p>
<div id="bold" class="section level5 unlisted unnumbered">
<h5 class="unlisted unnumbered">Bold</h5>
<p>Bold is achieved with double asterisks e.g. <code>**bold**</code> is
rendered as <strong>bold</strong>.</p>
</div>
<div id="italics" class="section level5 unlisted unnumbered">
<h5 class="unlisted unnumbered">Italics</h5>
<p>Italics is achieved with a single asterisk
e.g. <code>*italics*</code> is rendered as <em>italics</em>.</p>
</div>
<div id="strikethrough" class="section level5 unlisted unnumbered">
<h5 class="unlisted unnumbered">Strikethrough</h5>
<p>Strikethrough is achieved with tilde
e.g. <code>~strikethrough~</code> is rendered as
<sub>Strikethrough</sub>.</p>
</div>
</div>
<div id="next-section" class="section level4 unlisted unnumbered">
<h4 class="unlisted unnumbered">Next section</h4>
<p>The tab set ends when we return to a higher header level.</p>
</div>
</div>
<p><strong>NOTE</strong>: The border and background colour have been
added in order to differentiate the output rendered from the markdown
above from the main text of this document. This is not part of the
default output.</p>
</div>
<div id="line-breaks" class="section level3">
<h3>Line breaks</h3>
<p>Two consecutive lines of body text in the R Markdown document will be
read as as the same paragraph and concatenated. To insert a line break
between two lines either add two (or more) spaces or a backslash at the
end of the first line. For example:</p>
<pre><code>This is the first line
There are no spaces after the end of the previous line</code></pre>
<p>is rendered as:</p>
<div class="renderedblock">
<p>This is the first line There are no spaces after the end of the
previous line</p>
</div>
<p>where as:</p>
<pre><code>This is the first line\
There are no spaces after the end of the previous line</code></pre>
<p>is rendered as:</p>
<div class="renderedblock">
<p>This is the first line<br />
There are no spaces after the end of the previous line</p>
</div>
</div>
<div id="lists" class="section level3">
<h3>Lists</h3>
<p>We can create both unordered lists (bullet points) or ordered lists
(numbered).</p>
<div id="unordered-lists" class="section level4">
<h4>Unordered lists</h4>
<p>To create an unordered list using <code>*</code>, <code>-</code> or
<code>+</code> (all do the same thing). You can created nested lists by
indenting by 4 spaces.</p>
<pre><code>* Cricket
* Rugby
* Football
    * English Premier League
    * La Liga
    * Serie A
* Basketball
* Volleyball
* Hockey</code></pre>
<p>is rendered as:</p>
<div class="renderedblock">
<ul>
<li>Cricket</li>
<li>Rugby</li>
<li>Football
<ul>
<li>English Premier League</li>
<li>La Liga</li>
<li>Serie A</li>
</ul></li>
<li>Basketball</li>
<li>Volleyball</li>
<li>Hockey</li>
</ul>
</div>
</div>
<div id="ordered-lists" class="section level4">
<h4>Ordered lists</h4>
<p>Ordered lists can be created using a number for numeric bullets, a
lower case letter for <code>a</code>, <code>b</code>,
<code>c</code>…etc., or <code>i</code>s for roman numerals. Again
indentation can be used to create nested lists. For example</p>
<pre><code>1. Cat
2. Ferret
3. Dog
    a. Terriers
        i.  Jack Russell
        ii. Airedale
        iii. Yorkshire
        iv. West Highland
    b. Labradors
    c. Spaniels
4. Goldfish</code></pre>
<p>is rendered as:</p>
<div class="renderedblock">
<ol style="list-style-type: decimal">
<li>Cat</li>
<li>Ferret</li>
<li>Dog
<ol style="list-style-type: lower-alpha">
<li>Terriers
<ol style="list-style-type: lower-roman">
<li>Jack Russell</li>
<li>Airedale</li>
<li>Yorkshire</li>
<li>West Highland</li>
</ol></li>
<li>Labradors</li>
<li>Spaniels</li>
</ol></li>
<li>Goldfish</li>
</ol>
</div>
<p>It isn’t actually necessary to use particular numbers/letters/roman
numerals in any particular order - the correct order for the bullets
will be determined when the document is rendered. So in fact the
following would results in the same output:</p>
<pre><code>1. Cat
1. Ferret
5. Dog
    a. Terriers
        i.  Jack Russell
        i. Airedale
        i. Yorkshire
        i. West Highland
    b. Labradors
    a. Spaniels
1. Goldfish</code></pre>
</div>
</div>
<div id="links" class="section level3">
<h3>Links</h3>
<p>As with a standard html web page, we can add hyperlinks, both to
internal sections of the document or to external pages. The general
format for creating a link is to surround the link text (what is
displayed) with square brackets and then follow this with the link
itself (internal tag or external page) surrounded by round backets:</p>
<pre><code>[This is the text](this_is_the_link)</code></pre>
<div id="external-links" class="section level4">
<h4>External links</h4>
<p>External links can either be to another html document on the same
file system or to a URL elsewhere on the internet.</p>
<p>For example we can link to week 6 documentation, which is in the same
folder as this document:</p>
<p><code>[week 6 document](week6.html)</code> → <a
href="week6.html">week 6 document</a></p>
<p>Alternatively, we can link to pages elsewhere on the internet,
e.g:</p>
<p><code>[Hadley Wickham's old R Markdown page](https://r4ds.had.co.nz/r-markdown.html)</code>
→ <a href="https://r4ds.had.co.nz/r-markdown.html">Hadley Wickham’s old
R Markdown page</a></p>
</div>
<div id="internal-links-to-sections" class="section level4">
<h4>Internal links to sections</h4>
<p>We can link to any section of the current document, but first we need
to add a tag to the header for that section. For example, if we want to
be able to link to the top of this Markdown section, we would add a tag
to the header like this:</p>
<p><code>## Markdown sections {#markdown-header}</code></p>
<p>Then to link to this section in text we would use:</p>
<p><code>[link to header](#markdown-header)</code></p>
<p>e.g. Follow <a href="#markdown-header">this link</a> to get to the
top of this section</p>
</div>
</div>
<div id="inserting-images" class="section level3">
<h3>Inserting images</h3>
<p>Images can be inserted into the document in a number of ways, but the
simplest uses a similar syntax to links, but this time preceded by an
exclamation mark:</p>
<p><code>![optional caption](link_to_image)</code></p>
<p>The link can be a URL to an image elsewhere on the internet or a
relative path to an image on the same file system.</p>
<p><code>![Figure 1: A cheetah!](images/Rmarkdown_cheetah.png)</code></p>
<p>inserts the image like this:</p>
<div class="float">
<img src="images/Rmarkdown_cheetah.png" alt="Figure 1: Cheetah" />
<div class="figcaption">Figure 1: Cheetah</div>
</div>
<p>This does not give us much control over how the image is rendered. We
can control the size by specifying the width in either absolute display
pixels or the percentage of the document width with the following
syntax:</p>
<p><code>![Figure 1: Cheetah](images/Rmarkdown_cheetah.png){width=10%}</code></p>
<p>inserts the image like this:</p>
<div class="float">
<img src="images/Rmarkdown_cheetah.png" style="width:10.0%"
alt="Figure 1: Cheetah" />
<div class="figcaption">Figure 1: Cheetah</div>
</div>
<p><code>![Figure 1: Cheetah](images/Rmarkdown_cheetah.png){width=150px}</code></p>
<p>inserts the image like this:</p>
<div class="float">
<img src="images/Rmarkdown_cheetah.png" width="150"
alt="Figure 1: Cheetah" />
<div class="figcaption">Figure 1: Cheetah</div>
</div>
</div>
<div id="tables" class="section level3">
<h3>Tables</h3>
<p>Most tables to appear in your documents will be data generated by R
code chunks, however, on rare occasions we may want to manually include
a table. This can be achieved using the following syntax.</p>
<pre><code>| Name        | Band        |
| ----------- | ----------- |
| Mick        | Stones      |
| John        | Beatles     |
| Paul        | Beatles     |          </code></pre>
<p>is rendered as:</p>
<div class="renderedblock">
<table>
<thead>
<tr class="header">
<th>Name</th>
<th>Band</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Mick</td>
<td>Stones</td>
</tr>
<tr class="even">
<td>John</td>
<td>Beatles</td>
</tr>
<tr class="odd">
<td>Paul</td>
<td>Beatles</td>
</tr>
</tbody>
</table>
</div>
<p>Table alignments can be done using the following syntax:</p>
<pre><code>| Name  | Band    | Instrument |
| :---  | :----:  |       ---: |
| John  | Beatles | Guitar     | 
| Paul  | Beatles | Bass       |
| Keith | Stones  | Guitar     |</code></pre>
<p>This is rendered as:</p>
<div class="renderedblock">
<table>
<thead>
<tr class="header">
<th align="left">Name</th>
<th align="center">Band</th>
<th align="right">Instrument</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">John</td>
<td align="center">Beatles</td>
<td align="right">Guitar</td>
</tr>
<tr class="even">
<td align="left">Paul</td>
<td align="center">Beatles</td>
<td align="right">Bass</td>
</tr>
<tr class="odd">
<td align="left">Keith</td>
<td align="center">Stones</td>
<td align="right">Guitar</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="blockquotes" class="section level3">
<h3>Blockquotes</h3>
<p>A block quote is often used when we want to quote a piece of text
from another document. This is done by using the <code>&gt;</code>
symbol at the beginning of the line. For example:</p>
<pre><code>&gt; &quot;The R language is a free software environment for statistical
&gt; computing and graphics supported by the R Foundation for Statistical
&gt; Computing. The R language is widely used among statisticians and
&gt; data miners for developing statistical software and data analysis.&quot;
&gt; (Wikipedia)</code></pre>
<p>is rendered as:</p>
<blockquote>
<p>“The R language is a free software environment for statistical
computing and graphics supported by the R Foundation for Statistical
Computing. The R language is widely used among statisticians and data
miners for developing statistical software and data analysis.”
(Wikipedia)</p>
</blockquote>
</div>
<div id="code-blocks" class="section level3">
<h3>Code blocks</h3>
<p>We have seen that we can highlight text as “code” inline using
backticks <code>`code`</code>. This is useful for short snippets of
code, but if we want to add a longer piece of code as part of the
documentation (i.e. not code that we want to run, but just to show the
reader), we can use a code block. This is done by surrounding the code
with three backticks. For example:</p>
<pre><code>```
metabric %&gt;%
    group_by(ER_status, Cancer_type) %&gt;%
    summarise(ERBB2_mean = mean(ERBB2)) %&gt;%
    top_n(n = 1)
```</code></pre>
<p>This will be rendered as:</p>
<pre class="blocktype"><code>metabric %&gt;%
    group_by(ER_status, Cancer_type) %&gt;%
    summarise(ERBB2_mean = mean(ERBB2)) %&gt;%
    top_n(n = 1)</code></pre>
<p>For code that we actually want to run, we will use R code chunks.</p>
</div>
</div>
<div id="r-code-chunks" class="section level2">
<h2>R code chunks</h2>
<p>R code that we want to run during the rendering of document should be
placed in an R code chunk. These sections of R code are executed when
the document is rendered. The results of the code may then be included
in the output document. This allows us to dynamically generate tables,
figures and other output based on the data and code in the document.
This is a powerful feature of R Markdown, as it allows us to create
reproducible reports that can be easily updated with new data or code
changes.</p>
<p>The R code chunk is created by surrounding the code with three
backticks and adding <code>{r}</code> after the first three backticks.
For example:</p>
<pre class="markdown"><code>```{r}
x &lt;- 10
y &lt;- 20
x + y
```</code></pre>
<p>Generates the following in the output:</p>
<pre class="r"><code>x &lt;- 10
y &lt;- 20
x + y</code></pre>
<pre><code>## [1] 30</code></pre>
<p>By default the code is written to a code chunk (we can change this -
see <a href="#chunk_opts">below</a>). and any output from the code is
written underneath. The output might include anything that would
normally be written to the console (such the result of
<code>x + y</code> here), tables, plots, or even warnings or errors.</p>
<div id="creating-code-chunks" class="section level3">
<h3>Creating code chunks</h3>
<p>To create a code chunk, you can use the insert icon on the
toolbar:</p>
<p><img src="images/Rmarkdown_insert_chunk.png" /></p>
<p>or you can use the keyboard shortcut <code>Ctrl + Alt + I</code>
(Windows) or <code>Cmd + Option + I</code> (Mac), or you can type the
code chunk manually as shown above. The code chunk will be created at
the location of the cursor in the document.</p>
<p>The empty code chunk will look like this:</p>
<p><img src="images/Rmarkdown_empty_code_chunk.png" /></p>
<p>You’ll notice a few icons on the right in the toolbar above the code
chunk. These are used to run the code chunk, run all code chunks above
the current chunk, and to manage chunk options (see below).</p>
</div>
<div id="running-code-chunks" class="section level3">
<h3>Running code chunks</h3>
<p>To run a code chunk, you can click the green arrow icon in the
toolbar above the code chunk, or you can use the keyboard shortcut
<code>Ctrl + Shift + Enter</code> (Windows) or
<code>Cmd + Shift + Enter</code> (Mac). This will run the code in the
chunk and display the output below the chunk.</p>
</div>
<div id="chunk_opts" class="section level3">
<h3>Chunk options</h3>
<p>We can apply a number of options to code chunks to control how they
are rendered in the output document. There are a large number of
possible options the most common of which are:</p>
<ul>
<li><code>echo = FALSE</code> - do not display the code in rendered
document, but do display the results of the code.</li>
<li><code>include = FALSE</code> - do not display either the code or the
results in the document when it is rendered. The code will still run and
so any changes it makes to the environment (new objects or changes to
existing objects) will be available for subsequent code chunks.</li>
<li><code>message = FALSE</code> - do not display any messages that are
generated by the code chunk in the rendered file.</li>
<li><code>warning = FALSE</code> - do not display warnings that are
generated by code chunk in the rendered file.</li>
<li><code>eval = FALSE</code> - do not run the code in the chunk, but
display the code in the rendered document.</li>
<li><code>cache = TRUE</code> - cache the results of the code chunk so
that it does not need to be re-run every time the document is rendered.
This can speed up rendering time for large code chunks or when the code
takes a long time to run. The cache is stored in a folder called
<code>cache</code> in the same directory as the R Markdown file.</li>
<li><code>fig.width</code> and <code>fig.height</code> - set the width
and height of figures generated by the code chunk.</li>
<li><code>fig.cap</code> - set the caption for the figure generated by
the code chunk. This will be displayed below the figure in the rendered
document.</li>
</ul>
<p>A thorough guide to all the avaialable chunk options (and more
<code>knitr</code> options) can be found <a
href="https://yihui.org/knitr/options/">here</a>.</p>
</div>
<div id="chunk-label" class="section level3">
<h3>Chunk label</h3>
<p>We can specify a label for the code chunk by adding it after the
<code>{r}</code> in the code chunk header:</p>
<pre class="markdown"><code>```{r label}
```</code></pre>
<p>This has a number of uses. In RStudio you should see a menu in the
bottom left of the script panel:</p>
<p><img src="images/Rmarkdown_outline_menu.png" /></p>
<p>This gives us a way to navigate through the document and includes any
headers and code chunks with labels. This is very useful for long
documents.</p>
</div>
<div id="the-setup-chunk" class="section level3">
<h3>The “setup” chunk</h3>
<p>Best practice is to create a “setup” chunk at the beginning of the
document. This chunk should include all the packages that you will need
to run the the code in the document.</p>
<p>The “setup” chunk will also include any options that you want to set
for the entire document. For example, you might want to set the default
chunk options for the entire document to not display code. You can do
this using the <code>knitr</code> command <code>opts_chunk$set()</code>.
For example the set up chunk might look like this:</p>
<pre class="markdown"><code>```{r setup, message=FALSE}
library(tidyverse)
library(patchwork)
library(knitr)
library(kableExtra)
library(DT)
knitr::opts_chunk$set(warning = FALSE, echo = TRUE)
```</code></pre>
<p>The <code>opts_chunk$set()</code> function sets the default options
for all chunks, in this case to always display the code and not display
any warnings. You can override these options in individual chunks by
specifying the options in the chunk header.</p>
<p>It’s good idea to set <code>message = FALSE</code> for the setup
chunk so that it does not print all the package startup messages in the
rendered document.</p>
<div id="a-note-on-the-working-directory" class="section level4">
<h4>A note on the working directory</h4>
<p>When evaluating code chunks, the default working directory is the
location of the R Markdown file. This means that any paths to files you
wish to read/write need to be relative to that directory. If you wish to
use a different working directory, you can set this in the setup chunk
using the following code:</p>
<pre><code>projDir &lt;- &quot;/Full/path/to/your/project/directory&quot;
opts_knit$set(root.dir = projDir)</code></pre>
</div>
</div>
<div id="tabular-output" class="section level3">
<h3>Tabular output</h3>
<p>By default, R Markdown will display tables in basically the same way
as they would be displayed in the console. For example, if we display
the first few rows of the <code>mtcars</code> dataset we get the
following:</p>
<pre class="r"><code>smallTable &lt;- mtcars %&gt;%
    rownames_to_column(&quot;car&quot;) %&gt;%
    select(car, mpg, cyl, wt) %&gt;%
    slice(1:5)
smallTable</code></pre>
<pre><code>##                 car  mpg cyl    wt
## 1         Mazda RX4 21.0   6 2.620
## 2     Mazda RX4 Wag 21.0   6 2.875
## 3        Datsun 710 22.8   4 2.320
## 4    Hornet 4 Drive 21.4   6 3.215
## 5 Hornet Sportabout 18.7   8 3.440</code></pre>
<p>Basically imformative, but not very pretty. There are a lot of things
we can do to make the table a more functional and look better in our
report. The simplest is to use the <code>kable()</code> function from
the <code>knitr</code> package.</p>
<div id="the-kable-function" class="section level4">
<h4>The <code>kable()</code> function</h4>
<pre class="r"><code>smallTable %&gt;%
    kable()</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">car</th>
<th align="right">mpg</th>
<th align="right">cyl</th>
<th align="right">wt</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Mazda RX4</td>
<td align="right">21.0</td>
<td align="right">6</td>
<td align="right">2.620</td>
</tr>
<tr class="even">
<td align="left">Mazda RX4 Wag</td>
<td align="right">21.0</td>
<td align="right">6</td>
<td align="right">2.875</td>
</tr>
<tr class="odd">
<td align="left">Datsun 710</td>
<td align="right">22.8</td>
<td align="right">4</td>
<td align="right">2.320</td>
</tr>
<tr class="even">
<td align="left">Hornet 4 Drive</td>
<td align="right">21.4</td>
<td align="right">6</td>
<td align="right">3.215</td>
</tr>
<tr class="odd">
<td align="left">Hornet Sportabout</td>
<td align="right">18.7</td>
<td align="right">8</td>
<td align="right">3.440</td>
</tr>
</tbody>
</table>
<p><code>kable</code> generates a simple table using the Markdown syntax
that we saw previously. It can be used to control some basic aspects of
the appearance of the table, including the number of digits displayed,
the alignment of the columns, and the formatting of the table. For
example, we can use the <code>digits</code> argument to specify the
number of digits to display for each column. We can also use the
<code>align</code> argument to specify the alignment of the columns.</p>
<pre class="r"><code>smallTable %&gt;%
    kable(digits = 2, align = &quot;c&quot;)</code></pre>
<table>
<thead>
<tr class="header">
<th align="center">car</th>
<th align="center">mpg</th>
<th align="center">cyl</th>
<th align="center">wt</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Mazda RX4</td>
<td align="center">21.0</td>
<td align="center">6</td>
<td align="center">2.62</td>
</tr>
<tr class="even">
<td align="center">Mazda RX4 Wag</td>
<td align="center">21.0</td>
<td align="center">6</td>
<td align="center">2.88</td>
</tr>
<tr class="odd">
<td align="center">Datsun 710</td>
<td align="center">22.8</td>
<td align="center">4</td>
<td align="center">2.32</td>
</tr>
<tr class="even">
<td align="center">Hornet 4 Drive</td>
<td align="center">21.4</td>
<td align="center">6</td>
<td align="center">3.21</td>
</tr>
<tr class="odd">
<td align="center">Hornet Sportabout</td>
<td align="center">18.7</td>
<td align="center">8</td>
<td align="center">3.44</td>
</tr>
</tbody>
</table>
<p>A comprehensive guide to the <code>kable</code> function can be found
<a
href="https://bookdown.org/yihui/rmarkdown-cookbook/kable.html">here</a>.</p>
<p>There are a large number of other packages available to format tables
in more sophisticated ways. There is a list of some of the most popular
packages <a
href="https://datacarpentry.github.io/r-socialsci/instructor/06-rmarkdown.html#insert-table">here</a>.</p>
<p>Here we will look at two packages: <code>kableExtra</code>, which
extends the formatting capabilities of <code>kable</code>, and
<code>DT</code>, which provides a more interactive table format.</p>
</div>
<div id="the-kableextra-package" class="section level4">
<h4>The <code>kableExtra</code> package</h4>
<p>The package <code>kableExtra</code> replaces <code>kable()</code>
with the function <code>kbl()</code> to display tables in R Markdown. We
can then use various formatting commands to control the appearance of
the table in much the same way as we add layers to a ggplot. The
<code>kableExtra</code> package provides a number of functions that can
be used to format tables, including <code>kable_styling()</code>,
<code>column_spec()</code>, and <code>row_spec()</code>.</p>
<pre class="r"><code>smallTable %&gt;%
    kbl() %&gt;%
    kable_styling(bootstrap_options = c(&quot;striped&quot;, &quot;hover&quot;)) %&gt;%
    column_spec(column = 1, bold = TRUE, border_right = TRUE)</code></pre>
<table class="table table-striped table-hover" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
car
</th>
<th style="text-align:right;">
mpg
</th>
<th style="text-align:right;">
cyl
</th>
<th style="text-align:right;">
wt
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Mazda RX4
</td>
<td style="text-align:right;">
21.0
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
2.620
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Mazda RX4 Wag
</td>
<td style="text-align:right;">
21.0
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
2.875
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Datsun 710
</td>
<td style="text-align:right;">
22.8
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
2.320
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Hornet 4 Drive
</td>
<td style="text-align:right;">
21.4
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
3.215
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Hornet Sportabout
</td>
<td style="text-align:right;">
18.7
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
3.440
</td>
</tr>
</tbody>
</table>
<p>As well as allowing us to control the formatting of the table
ourselves, <code>kableExtra</code> also provides a number of pre-defined
styles that we can use to quickly format our tables.</p>
<pre class="r"><code>smallTable %&gt;%
    kbl() %&gt;%
    kable_classic(full_width = F, html_font = &quot;Cambria&quot;)</code></pre>
<table class=" lightable-classic" style="font-family: Cambria; width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
car
</th>
<th style="text-align:right;">
mpg
</th>
<th style="text-align:right;">
cyl
</th>
<th style="text-align:right;">
wt
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Mazda RX4
</td>
<td style="text-align:right;">
21.0
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
2.620
</td>
</tr>
<tr>
<td style="text-align:left;">
Mazda RX4 Wag
</td>
<td style="text-align:right;">
21.0
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
2.875
</td>
</tr>
<tr>
<td style="text-align:left;">
Datsun 710
</td>
<td style="text-align:right;">
22.8
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
2.320
</td>
</tr>
<tr>
<td style="text-align:left;">
Hornet 4 Drive
</td>
<td style="text-align:right;">
21.4
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
3.215
</td>
</tr>
<tr>
<td style="text-align:left;">
Hornet Sportabout
</td>
<td style="text-align:right;">
18.7
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
3.440
</td>
</tr>
</tbody>
</table>
<p>More details about all the fancy things you can do with
<code>kableExtra</code> can be found <a
href="https://cran.r-project.org/web/packages/kableExtra/vignettes/awesome_table_in_html.html">here</a>.</p>
</div>
<div id="the-dt-package" class="section level4">
<h4>The <code>DT</code> package</h4>
<p>The <code>DT</code> package provides a more interactive table format
that allows us to sort, filter, search, and paginate the table. It also
provides options to add buttons to export the table to CSV, Excel, or
PDF format. The basic command is <code>datatable()</code>, which takes a
data.frame as input and returns an interactive table.</p>
<pre class="r"><code>longTable  &lt;- mtcars %&gt;%
    rownames_to_column(&quot;car&quot;) %&gt;%
    select(car, mpg, cyl, wt)
longTable %&gt;%
    datatable()</code></pre>
<div class="datatables html-widget html-fill-item" id="htmlwidget-99ed9936208ba0b2e0ee" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-99ed9936208ba0b2e0ee">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32"],["Mazda RX4","Mazda RX4 Wag","Datsun 710","Hornet 4 Drive","Hornet Sportabout","Valiant","Duster 360","Merc 240D","Merc 230","Merc 280","Merc 280C","Merc 450SE","Merc 450SL","Merc 450SLC","Cadillac Fleetwood","Lincoln Continental","Chrysler Imperial","Fiat 128","Honda Civic","Toyota Corolla","Toyota Corona","Dodge Challenger","AMC Javelin","Camaro Z28","Pontiac Firebird","Fiat X1-9","Porsche 914-2","Lotus Europa","Ford Pantera L","Ferrari Dino","Maserati Bora","Volvo 142E"],[21,21,22.8,21.4,18.7,18.1,14.3,24.4,22.8,19.2,17.8,16.4,17.3,15.2,10.4,10.4,14.7,32.4,30.4,33.9,21.5,15.5,15.2,13.3,19.2,27.3,26,30.4,15.8,19.7,15,21.4],[6,6,4,6,8,6,8,4,4,6,6,8,8,8,8,8,8,4,4,4,4,8,8,8,8,4,4,4,8,6,8,4],[2.62,2.875,2.32,3.215,3.44,3.46,3.57,3.19,3.15,3.44,3.44,4.07,3.73,3.78,5.25,5.424,5.345,2.2,1.615,1.835,2.465,3.52,3.435,3.84,3.845,1.935,2.14,1.513,3.17,2.77,3.57,2.78]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>car<\/th>\n      <th>mpg<\/th>\n      <th>cyl<\/th>\n      <th>wt<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[2,3,4]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"car","targets":1},{"name":"mpg","targets":2},{"name":"cyl","targets":3},{"name":"wt","targets":4}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<p>There are a lot of options available to control the appearance and
functionality of the table. Extensive documentation is available <a
href="https://rstudio.github.io/DT/">here</a>.</p>
<p>Much of the formatting is done using the <code>options</code>
argument, which takes a list of options. The <code>dom</code> option
controls the layout of the different elements, and the
<code>buttons</code> option controls the buttons that are displayed. The
<code>pageLength</code> option controls the number of rows displayed on
each page.</p>
<p>The <code>dom</code> option is a string that specifies the layout of
the table. The string can contain the following characters:</p>
<ul>
<li><code>l</code> - length changing input control (how many rows to
display)</li>
<li><code>f</code> - filtering input (search box)</li>
<li><code>t</code> - table</li>
<li><code>i</code> - table information summary (e.g. “Showing 1 to 10 of
57 entries”)</li>
<li><code>p</code> - pagination control (next/previous buttons)</li>
<li><code>B</code> - buttons (export buttons)</li>
<li><code>r</code> - processing display element (loading indicator)</li>
</ul>
<p>The order of the characters in the string determines the order in
which the elements are displayed.</p>
<p>Let’s add custom column names to the table, remove the search box,
change the number of rows displayed on each page, and add a button to
export the table to CSV.</p>
<p>By ommitting the <code>f</code> character from the <code>dom</code>
string, we remove the search box.</p>
<p>To add the export buttons, we need to add the <code>buttons</code>
option to the <code>options</code> argument, but we also need to add the
<code>B</code> character to the <code>dom</code> string and intruct the
table to use the “Buttons” extension.</p>
<pre class="r"><code>longTable %&gt;%
    datatable(
        extensions = &quot;Buttons&quot;,
        options = list(
            dom = &quot;Btip&quot;,
            buttons = c(&quot;csv&quot;, &quot;excel&quot;),
            pageLength = 5),
        colnames = c(&quot;Car&quot;, &quot;Miles per gallon&quot;, &quot;Cylinders&quot;, &quot;Weight&quot;)
    )</code></pre>
<div class="datatables html-widget html-fill-item" id="htmlwidget-8e3d7f0b6b08cd9949f2" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-8e3d7f0b6b08cd9949f2">{"x":{"filter":"none","vertical":false,"extensions":["Buttons"],"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32"],["Mazda RX4","Mazda RX4 Wag","Datsun 710","Hornet 4 Drive","Hornet Sportabout","Valiant","Duster 360","Merc 240D","Merc 230","Merc 280","Merc 280C","Merc 450SE","Merc 450SL","Merc 450SLC","Cadillac Fleetwood","Lincoln Continental","Chrysler Imperial","Fiat 128","Honda Civic","Toyota Corolla","Toyota Corona","Dodge Challenger","AMC Javelin","Camaro Z28","Pontiac Firebird","Fiat X1-9","Porsche 914-2","Lotus Europa","Ford Pantera L","Ferrari Dino","Maserati Bora","Volvo 142E"],[21,21,22.8,21.4,18.7,18.1,14.3,24.4,22.8,19.2,17.8,16.4,17.3,15.2,10.4,10.4,14.7,32.4,30.4,33.9,21.5,15.5,15.2,13.3,19.2,27.3,26,30.4,15.8,19.7,15,21.4],[6,6,4,6,8,6,8,4,4,6,6,8,8,8,8,8,8,4,4,4,4,8,8,8,8,4,4,4,8,6,8,4],[2.62,2.875,2.32,3.215,3.44,3.46,3.57,3.19,3.15,3.44,3.44,4.07,3.73,3.78,5.25,5.424,5.345,2.2,1.615,1.835,2.465,3.52,3.435,3.84,3.845,1.935,2.14,1.513,3.17,2.77,3.57,2.78]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Car<\/th>\n      <th>Miles per gallon<\/th>\n      <th>Cylinders<\/th>\n      <th>Weight<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"Btip","buttons":["csv","excel"],"pageLength":5,"columnDefs":[{"className":"dt-right","targets":[2,3,4]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"car","targets":1},{"name":"mpg","targets":2},{"name":"cyl","targets":3},{"name":"wt","targets":4}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
<p>The <code>DT</code> R packages is a wrapper for the JavaScript
library <a href="https://datatables.net/">DataTables</a>. Be careful
when searching the web for information about <code>DT</code> that you
are not looking at the JavaScript documentation. Also, be carefule not
to confuse the <code>DT</code> package with the <code>data.table</code>
package, which is a different package for fast data manipulation in
R.</p>
<p><strong>NOTE</strong>: Be wary of creating very large tables in R
Markdown documents. The data in the table is all embedded in the final
document when it is rendered. If you have a very large table resulting
document can be very large.</p>
</div>
</div>
<div id="plots" class="section level3">
<h3>Plots</h3>
<p>If a code chunk generates a plot, the plot will be displayed in the
output document.</p>
<pre class="markdown"><code>```{r plot}
mtcars %&gt;%
    ggplot(aes(x = mpg, y = wt)) +
    geom_point() +
    labs(title = &quot;Scatter plot of weight vs miles per gallon&quot;,
         x = &quot;Miles per gallon&quot;,
         y = &quot;Weight&quot;) +
    theme_minimal()
```</code></pre>
<p>is rendered as:</p>
<pre class="r"><code>mtcars %&gt;%
    ggplot(aes(x = mpg, y = wt)) +
    geom_point() +
    labs(title = &quot;Scatter plot of weight vs miles per gallon&quot;,
         x = &quot;Miles per gallon&quot;,
         y = &quot;Weight&quot;) +
    theme_minimal()</code></pre>
<p><img src="week7_Rmarkdown_files/figure-html/plot-1.png" width="672" /></p>
<p>Using chunk options we can control the size of the plot in the
document and add a caption to the plot.</p>
<p>The default size of the plot is 7 inches wide and 5 inches high. We
can change the size of the plot using the <code>fig.width</code> and
<code>fig.height</code> options.</p>
<p>Note that the caption can be specified as a string in the
<code>fig.cap</code> option or using a variable that can be defined in
the code chunk (or in a previous code chunk).</p>
<pre><code>```{r plot2, fig.with=5, fig.height=3, fig.cap=figCap}
figCap &lt;- &quot;Scatter plot of weight vs miles per gallon&quot;
mtcars %&gt;%
    ggplot(aes(x = mpg, y = wt)) +
    geom_point() +
    labs(x = &quot;Miles per gallon&quot;,
         y = &quot;Weight&quot;) +
    theme_minimal()
```</code></pre>
<p>is rendered as:</p>
<pre class="r"><code>figCap &lt;- &quot;Scatter plot of weight vs miles per gallon&quot;
mtcars %&gt;%
    ggplot(aes(x = mpg, y = wt)) +
    geom_point() +
    labs(x = &quot;Miles per gallon&quot;,
         y = &quot;Weight&quot;) +
    theme_minimal()</code></pre>
<div class="figure">
<img src="week7_Rmarkdown_files/figure-html/plot2-1.png" alt="Scatter plot of weight vs miles per gallon" width="672" />
<p class="caption">
Scatter plot of weight vs miles per gallon
</p>
</div>
<div id="the-patchwork-package" class="section level4">
<h4>The <code>patchwork</code> package</h4>
<p>It is often the case that we want to put multiple plots together in a
single figure. There are various packages that can be used to do this
such as <code>ggarrange</code>, <code>gridExtra</code>, and
<code>cowplot</code>. Here we will look at the <code>patchwork</code>
package, which provides a very simple and intuitive way to combine
ggplots in a grid.</p>
<p>First create each plot and rather than printing them, assign them to
a variable. Then we can use the <code>patchwork</code> syntax to combine
the plots.</p>
<pre class="r"><code>p1 &lt;- mtcars %&gt;%
    mutate(across(cyl, factor)) %&gt;%
    ggplot(aes(x = mpg, y = wt)) +
    geom_point(aes(colour = cyl)) +
    geom_text(label = &quot;A&quot;, x = 22.5, y = 3.5, size = 50)
p2 &lt;- mtcars %&gt;%
    mutate(across(cyl, factor)) %&gt;%
    ggplot(aes(x = gear, y = hp)) +
    geom_point(aes(colour = cyl)) +
    geom_text(label = &quot;B&quot;, x = 4, y = 195, size = 50)
p1 + p2 </code></pre>
<p><img src="week7_Rmarkdown_files/figure-html/patchworkA-1.png" width="960" /></p>
<p><code>patchwork</code> provides a lot of options for combining plots,
including <code>+</code> to add plots together, <code>/</code> to stack
plots vertically, and <code>|</code> to stack plots horizontally. We can
use <code>plot_layout()</code> to control various aspects of the layout,
for example we can combine legends when they are the same. We can also
use <code>plot_annotation()</code> to add a title and subtitle to the
figure (and other annotations).</p>
<p>I am going to reuse the same plots a few times just to show you how
the layout works.</p>
<pre class="r"><code>((p1 + p2) / (p2 + p1 + p2) | (p1 / p2 / p1)) +
    plot_layout(guides = &quot;collect&quot;) +
    plot_annotation(title = &quot;Patchwork example&quot;,
                    subtitle = &quot;Combining plots with patchwork&quot;)</code></pre>
<p><img src="week7_Rmarkdown_files/figure-html/patchworkB-1.png" width="1152" /></p>
<p>Here I have gathered plots into three plot groups -
<code>p1 + p2</code>, <code>p2 + p1 + p1</code>, and
<code>p1 / p2 / p1</code>. In the final group I have used the
<code>/</code> operator to stack the plots vertically. I have then
stacked the first two groups above each other and the third group to the
right using the <code>|</code> operator.</p>
<p>The <code>plot_layout()</code> and <code>plot_annotation()</code> can
be added to any grouping level so to get them to apply to the whole
figure, we put all three groups in brackets to define the whole figure.
It can take a bit of getting used to, but once you get the hang of it,
it is very simple to create complex figures with many plots.</p>
<p>Extensive documentation is available <a
href="https://patchwork.data-imaginist.com/">here</a>.</p>
</div>
</div>
</div>
<div id="inline-r-code" class="section level2">
<h2>Inline R code</h2>
<p>It is also possible to include R code inline in the markdown. This is
done by surrounding the code with single backticks and start it wil
<code>r</code>. This is useful if, for example, you want to include a
value from a variable in the text. For example:</p>
<pre class="markdown"><code>```{r inline}
six_cyl_mean_mpg &lt;- mtcars %&gt;%
    filter(cyl == 6) %&gt;%
    summarise(mpg = mean(mpg)) %&gt;%
    pull(mpg)
```
The mean mpg of cars with 6 cylinders was **`r six_cyl_mean_mpg`**.</code></pre>
<p>Will be rendered as:</p>
<div class="renderedblock">
<pre class="r"><code>six_cyl_mean_mpg &lt;- mtcars %&gt;%
    filter(cyl == 6) %&gt;%
    summarise(mpg = mean(mpg)) %&gt;%
    pull(mpg)</code></pre>
<p>The mean mpg of cars with 6 cylinders was
<strong>19.7428571</strong>.</p>
</div>
</div>
<div id="challenge" class="section level2">
<h2>Challenge</h2>
<p>Based on the information in this document and in the various links,
create a report to match the one <a
href="week7_Rmarkdown_exercise.html">here</a>.</p>
<p>I have hidden the code except for the chunk loading the data and the
last chunk, which prints the session info. Where the code chunks should
be you’ll see:</p>
<pre><code>Code chunk: *some details*</code></pre>
<p>Replace these as necesary with your own code - you may want to refer
back to previous sessions.</p>
<p>You may also need to do a bit of searching in function help pages,
documentation linked above or on the web generally to figure out some of
the code. For example, in the final figure I have added sub-figure
labels (a, b, c, d) using <code>patchwork</code>. I couldn’t remember
how to do this, so I did a web search for “patchwork figure labels”.</p>
<p>Don’t worry about the grey banner at the top, that is part of this
website.</p>
</div>
<div id="acknowledgements" class="section level2">
<h2>Acknowledgements</h2>
<p>This session was developed with reference to materials by <a
href="https://github.com/ac812/reproducibility-training">Alexia
Cardona</a> and the <a
href="https://datacarpentry.github.io/r-socialsci/instructor/06-rmarkdown.html">Data
Carpentry project</a>.</p>
</div>
<div id="session-details" class="section level2">
<h2>Session details</h2>
<p>It is good practice to include details of the R environment used in
the analysis, including the R version, packages used and their version
numbers. This can be done at the end of the report. The neatest way to
do this is to use the <code>devtools</code> package.</p>
<pre class="r"><code>devtools::session_info()</code></pre>
<pre><code>## ─ Session info ───────────────────────────────────────────────────────────────
##  setting  value
##  version  R version 4.5.0 (2025-04-11)
##  os       Ubuntu 24.04.2 LTS
##  system   x86_64, linux-gnu
##  ui       X11
##  language (EN)
##  collate  en_US.UTF-8
##  ctype    en_US.UTF-8
##  tz       Europe/London
##  date     2025-04-25
##  pandoc   3.1.3 @ /usr/bin/ (via rmarkdown)
##  quarto   NA
## 
## ─ Packages ───────────────────────────────────────────────────────────────────
##  package     * version date (UTC) lib source
##  bslib         0.9.0   2025-01-30 [1] CRAN (R 4.5.0)
##  cachem        1.1.0   2024-05-16 [1] CRAN (R 4.5.0)
##  cli           3.6.4   2025-02-13 [1] CRAN (R 4.5.0)
##  colorspace    2.1-1   2024-07-26 [1] CRAN (R 4.5.0)
##  crosstalk     1.2.1   2023-11-23 [1] CRAN (R 4.5.0)
##  devtools      2.4.5   2022-10-11 [1] CRAN (R 4.5.0)
##  digest        0.6.37  2024-08-19 [1] CRAN (R 4.5.0)
##  dplyr       * 1.1.4   2023-11-17 [1] CRAN (R 4.5.0)
##  DT          * 0.33    2024-04-04 [1] CRAN (R 4.5.0)
##  ellipsis      0.3.2   2021-04-29 [1] CRAN (R 4.5.0)
##  evaluate      1.0.3   2025-01-10 [1] CRAN (R 4.5.0)
##  farver        2.1.2   2024-05-13 [1] CRAN (R 4.5.0)
##  fastmap       1.2.0   2024-05-15 [1] CRAN (R 4.5.0)
##  forcats     * 1.0.0   2023-01-29 [1] CRAN (R 4.5.0)
##  fs            1.6.6   2025-04-12 [1] CRAN (R 4.5.0)
##  generics      0.1.3   2022-07-05 [1] CRAN (R 4.5.0)
##  ggplot2     * 3.5.2   2025-04-09 [1] CRAN (R 4.5.0)
##  glue          1.8.0   2024-09-30 [1] CRAN (R 4.5.0)
##  gtable        0.3.6   2024-10-25 [1] CRAN (R 4.5.0)
##  hms           1.1.3   2023-03-21 [1] CRAN (R 4.5.0)
##  htmltools     0.5.8.1 2024-04-04 [1] CRAN (R 4.5.0)
##  htmlwidgets   1.6.4   2023-12-06 [1] CRAN (R 4.5.0)
##  httpuv        1.6.16  2025-04-16 [1] CRAN (R 4.5.0)
##  jquerylib     0.1.4   2021-04-26 [1] CRAN (R 4.5.0)
##  jsonlite      2.0.0   2025-03-27 [1] CRAN (R 4.5.0)
##  kableExtra  * 1.4.0   2024-01-24 [1] CRAN (R 4.5.0)
##  knitr       * 1.50    2025-03-16 [1] CRAN (R 4.5.0)
##  labeling      0.4.3   2023-08-29 [1] CRAN (R 4.5.0)
##  later         1.4.2   2025-04-08 [1] CRAN (R 4.5.0)
##  lifecycle     1.0.4   2023-11-07 [1] CRAN (R 4.5.0)
##  lubridate   * 1.9.4   2024-12-08 [1] CRAN (R 4.5.0)
##  magrittr      2.0.3   2022-03-30 [1] CRAN (R 4.5.0)
##  memoise       2.0.1   2021-11-26 [1] CRAN (R 4.5.0)
##  mime          0.13    2025-03-17 [1] CRAN (R 4.5.0)
##  miniUI        0.1.2   2025-04-17 [1] CRAN (R 4.5.0)
##  munsell       0.5.1   2024-04-01 [1] CRAN (R 4.5.0)
##  patchwork   * 1.3.0   2024-09-16 [1] CRAN (R 4.5.0)
##  pillar        1.10.2  2025-04-05 [1] CRAN (R 4.5.0)
##  pkgbuild      1.4.7   2025-03-24 [1] CRAN (R 4.5.0)
##  pkgconfig     2.0.3   2019-09-22 [1] CRAN (R 4.5.0)
##  pkgload       1.4.0   2024-06-28 [1] CRAN (R 4.5.0)
##  profvis       0.4.0   2024-09-20 [1] CRAN (R 4.5.0)
##  promises      1.3.2   2024-11-28 [1] CRAN (R 4.5.0)
##  purrr       * 1.0.4   2025-02-05 [1] CRAN (R 4.5.0)
##  R6            2.6.1   2025-02-15 [1] CRAN (R 4.5.0)
##  Rcpp          1.0.14  2025-01-12 [1] CRAN (R 4.5.0)
##  readr       * 2.1.5   2024-01-10 [1] CRAN (R 4.5.0)
##  remotes       2.5.0   2024-03-17 [1] CRAN (R 4.5.0)
##  rlang         1.1.6   2025-04-11 [1] CRAN (R 4.5.0)
##  rmarkdown     2.29    2024-11-04 [1] CRAN (R 4.5.0)
##  rstudioapi    0.17.1  2024-10-22 [1] CRAN (R 4.5.0)
##  sass          0.4.10  2025-04-11 [1] CRAN (R 4.5.0)
##  scales        1.3.0   2023-11-28 [1] CRAN (R 4.5.0)
##  sessioninfo   1.2.3   2025-02-05 [1] CRAN (R 4.5.0)
##  shiny         1.10.0  2024-12-14 [1] CRAN (R 4.5.0)
##  stringi       1.8.7   2025-03-27 [1] CRAN (R 4.5.0)
##  stringr     * 1.5.1   2023-11-14 [1] CRAN (R 4.5.0)
##  svglite       2.1.3   2023-12-08 [1] CRAN (R 4.5.0)
##  systemfonts   1.2.2   2025-04-04 [1] CRAN (R 4.5.0)
##  tibble      * 3.2.1   2023-03-20 [1] CRAN (R 4.5.0)
##  tidyr       * 1.3.1   2024-01-24 [1] CRAN (R 4.5.0)
##  tidyselect    1.2.1   2024-03-11 [1] CRAN (R 4.5.0)
##  tidyverse   * 2.0.0   2023-02-22 [1] CRAN (R 4.5.0)
##  timechange    0.3.0   2024-01-18 [1] CRAN (R 4.5.0)
##  tzdb          0.5.0   2025-03-15 [1] CRAN (R 4.5.0)
##  urlchecker    1.0.1   2021-11-30 [1] CRAN (R 4.5.0)
##  usethis       3.1.0   2024-11-26 [1] CRAN (R 4.5.0)
##  vctrs         0.6.5   2023-12-01 [1] CRAN (R 4.5.0)
##  viridisLite   0.4.2   2023-05-02 [1] CRAN (R 4.5.0)
##  withr         3.0.2   2024-10-28 [1] CRAN (R 4.5.0)
##  xfun          0.52    2025-04-02 [1] CRAN (R 4.5.0)
##  xml2          1.3.8   2025-03-14 [1] CRAN (R 4.5.0)
##  xtable        1.8-4   2019-04-21 [1] CRAN (R 4.5.0)
##  yaml          2.3.10  2024-07-26 [1] CRAN (R 4.5.0)
## 
##  [1] /home/sawle01/R/x86_64-pc-linux-gnu-library/4.5
##  [2] /usr/local/lib/R/site-library
##  [3] /usr/lib/R/site-library
##  [4] /usr/lib/R/library
##  * ── Packages attached to the search path.
## 
## ──────────────────────────────────────────────────────────────────────────────</code></pre>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
